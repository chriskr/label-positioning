{"version":3,"sources":["testLabels.js","util.js","Input.js","TestBubbleChart.jsx","App.js","index.js"],"names":["names","moveRect","_ref","deltaLeft","deltaTop","left","right","top","bottom","addMargin","_ref2","_ref3","leftMargin","rightMargin","getDistance","_ref4","_ref5","left1","top1","left2","top2","Math","pow","getCenter","_ref6","isOverlapping","_ref7","_ref8","right1","bottom1","right2","bottom2","_isOverlapping","_layoutBox","rect","layedOutRects","center","forEach","layedOutRect","rectWithMargin","centerRect","isMoveLeft","abs","nop","Input","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onInput","value","target","setState","state","submit","onChange","onKeyDown","event","key","ref","React","createRef","_this$props","placeholder","react_default","a","createElement","type","onBlur","Component","DEFAULT_BUBBLE_COUNT","getFontSize","radius","Circle","styled","circle","_templateObject","View","div","_templateObject2","Container","_templateObject3","Label","_templateObject4","Svg","svg","_templateObject5","Controls","_templateObject6","InputLabel","label","_templateObject7","buildExampleData","n","arguments","length","undefined","range","map","random","color","concat","labels","join","TestBubbleChart","setExampleData","data","bubbleCount","mode","svgRef","containerRef","_this2","style","width","height","viewBox","r","cx","cy","fill","_ref2$label","fontSize","className","onClick","src_Input","current","currentData","containerRect","getBoundingClientRect","offsetLeft","offsetTop","deOverlappedLabels","rects","radiuses","minMargin","centerLeft","sum","_ref11","centerTop","_ref12","withDistance","index","centerDistance","sort","b","count","some","push","minusMargin","_ref13","layoutRects","Array","from","querySelectorAll","ele","_currentData$index","rest","objectWithoutProperties","objectSpread","positionLabels","App","src_TestBubbleChart","ReactDOM","render","src_App","document","getElementById"],"mappings":"6QAAaA,EAAQ,CACnB,OACA,OACA,UACA,QACA,QACA,WACA,QACA,SACA,SACA,QACA,QACA,UACA,YACA,QACA,SACA,UACA,QACA,QACA,SACA,UACA,SACA,YACA,QACA,SACA,QACA,SACA,OACA,OACA,QACA,OACA,UACA,UACA,QACA,UACA,OACA,SACA,OACA,cACA,SACA,SACA,UACA,QACA,OACA,QACA,SACA,QACA,SACA,SACA,UACA,QACA,SACA,YACA,SACA,MACA,WACA,SACA,SACA,SACA,QACA,UACA,MACA,WACA,WACA,SACA,SACA,SACA,QACA,WACA,OACA,SACA,QACA,UACA,SACA,UACA,SACA,MACA,OACA,QACA,SACA,UACA,OACA,UACA,SACA,OACA,WACA,SACA,OACA,SACA,SACA,SACA,QACA,QACA,WACA,QACA,SACA,QACA,WACA,SACA,QACA,UACA,QACA,UACA,UACA,UACA,OACA,QACA,QACA,UACA,SACA,QACA,SACA,YACA,WACA,UACA,OACA,SACA,OACA,UACA,SACA,QACA,UACA,QACA,UACA,SACA,SACA,SACA,MACA,MACA,QACA,OACA,QACA,SACA,UACA,WACA,OACA,SACA,OACA,SACA,QACA,QACA,SACA,WACA,OACA,QACA,SACA,OACA,OACA,SACA,OACA,QACA,OACA,QACA,UACA,WACA,QACA,OACA,OACA,UACA,OACA,UACA,SACA,SACA,SACA,UACA,SACA,QACA,OACA,WACA,SACA,UACA,UACA,QACA,SACA,SACA,UACA,SACA,OACA,OACA,SACA,QACA,QACA,SACA,SACA,QACA,SACA,QACA,SACA,OACA,SACA,UACA,SACA,QACA,SACA,YACA,SACA,SACA,UACA,UACA,OACA,WCvLWC,EAAW,SAAAC,EAEtBC,EACAC,GAHsB,MAIlB,CACJC,KALsBH,EACpBG,KAIWF,EACbG,MANsBJ,EACdI,MAKOH,EACfI,IAPsBL,EACPK,IAMJH,EACXI,OARsBN,EACFM,OAOHJ,IAGNK,EAAY,SAAAC,EAAAC,GAAA,IACrBN,EADqBK,E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","file":"static/js/main.bd290f7f.chunk.js","sourcesContent":["export const names = [\n  'Liam',\n  'Noah',\n  'William',\n  'James',\n  'Logan',\n  'Benjamin',\n  'Mason',\n  'Elijah',\n  'Oliver',\n  'Jacob',\n  'Lucas',\n  'Michael',\n  'Alexander',\n  'Ethan',\n  'Daniel',\n  'Matthew',\n  'Aiden',\n  'Henry',\n  'Joseph',\n  'Jackson',\n  'Samuel',\n  'Sebastian',\n  'David',\n  'Carter',\n  'Wyatt',\n  'Jayden',\n  'John',\n  'Owen',\n  'Dylan',\n  'Luke',\n  'Gabriel',\n  'Anthony',\n  'Isaac',\n  'Grayson',\n  'Jack',\n  'Julian',\n  'Levi',\n  'Christopher',\n  'Joshua',\n  'Andrew',\n  'Lincoln',\n  'Mateo',\n  'Ryan',\n  'Jaxon',\n  'Nathan',\n  'Aaron',\n  'Isaiah',\n  'Thomas',\n  'Charles',\n  'Caleb',\n  'Josiah',\n  'Christian',\n  'Hunter',\n  'Eli',\n  'Jonathan',\n  'Connor',\n  'Landon',\n  'Adrian',\n  'Asher',\n  'Cameron',\n  'Leo',\n  'Theodore',\n  'Jeremiah',\n  'Hudson',\n  'Robert',\n  'Easton',\n  'Nolan',\n  'Nicholas',\n  'Ezra',\n  'Colton',\n  'Angel',\n  'Brayden',\n  'Jordan',\n  'Dominic',\n  'Austin',\n  'Ian',\n  'Adam',\n  'Elias',\n  'Jaxson',\n  'Greyson',\n  'Jose',\n  'Ezekiel',\n  'Carson',\n  'Evan',\n  'Maverick',\n  'Bryson',\n  'Jace',\n  'Cooper',\n  'Xavier',\n  'Parker',\n  'Roman',\n  'Jason',\n  'Santiago',\n  'Chase',\n  'Sawyer',\n  'Gavin',\n  'Leonardo',\n  'Kayden',\n  'Ayden',\n  'Jameson',\n  'Kevin',\n  'Bentley',\n  'Zachary',\n  'Everett',\n  'Axel',\n  'Tyler',\n  'Micah',\n  'Vincent',\n  'Weston',\n  'Miles',\n  'Wesley',\n  'Nathaniel',\n  'Harrison',\n  'Brandon',\n  'Cole',\n  'Declan',\n  'Luis',\n  'Braxton',\n  'Damian',\n  'Silas',\n  'Tristan',\n  'Ryder',\n  'Bennett',\n  'George',\n  'Emmett',\n  'Justin',\n  'Kai',\n  'Max',\n  'Diego',\n  'Luca',\n  'Ryker',\n  'Carlos',\n  'Maxwell',\n  'Kingston',\n  'Ivan',\n  'Maddox',\n  'Juan',\n  'Ashton',\n  'Jayce',\n  'Rowan',\n  'Kaiden',\n  'Giovanni',\n  'Eric',\n  'Jesus',\n  'Calvin',\n  'Abel',\n  'King',\n  'Camden',\n  'Amir',\n  'Blake',\n  'Alex',\n  'Brody',\n  'Malachi',\n  'Emmanuel',\n  'Jonah',\n  'Beau',\n  'Jude',\n  'Antonio',\n  'Alan',\n  'Elliott',\n  'Elliot',\n  'Waylon',\n  'Xander',\n  'Timothy',\n  'Victor',\n  'Bryce',\n  'Finn',\n  'Brantley',\n  'Edward',\n  'Abraham',\n  'Patrick',\n  'Grant',\n  'Karter',\n  'Hayden',\n  'Richard',\n  'Miguel',\n  'Joel',\n  'Gael',\n  'Tucker',\n  'Rhett',\n  'Avery',\n  'Steven',\n  'Graham',\n  'Kaleb',\n  'Jasper',\n  'Jesse',\n  'Matteo',\n  'Dean',\n  'Zayden',\n  'Preston',\n  'August',\n  'Oscar',\n  'Jeremy',\n  'Alejandro',\n  'Marcus',\n  'Dawson',\n  'Lorenzo',\n  'Messiah',\n  'Zion',\n  'Maximus'\n];\n","import { sum } from 'lodash';\n\nconst NO_OVERLAP = {\n  get left() {\n    return 0;\n  },\n  get right() {\n    return 0;\n  },\n  get top() {\n    return 0;\n  },\n  get bottom() {\n    return 0;\n  },\n};\n\nexport const moveRect = (\n  { left, right, top, bottom },\n  deltaLeft,\n  deltaTop\n) => ({\n  left: left + deltaLeft,\n  right: right + deltaLeft,\n  top: top + deltaTop,\n  bottom: bottom + deltaTop,\n});\n\nexport const addMargin = (\n  { left, right, top, bottom },\n  { left: leftMargin, right: rightMargin, top: topMargin, bottom: bottomMargin }\n) => ({\n  left: left - leftMargin,\n  top: top - topMargin,\n  right: right + rightMargin,\n  bottom: bottom + bottomMargin,\n});\n\nexport const getDistance = (\n  { left: left1, top: top1 },\n  { left: left2, top: top2 }\n) => ((left1 - left2) ** 2 + (top1 - top2) ** 2) ** 0.5;\n\nexport const getCenter = ({ left, right, top, bottom }) => {\n  left += (right - left) / 2;\n  top += (bottom - top) / 2;\n  return {\n    left,\n    top,\n    right: left,\n    bottom: top,\n  };\n};\n\nexport const isOverlapping = (\n  { left: left1, right: right1, top: top1, bottom: bottom1 },\n  { left: left2, right: right2, top: top2, bottom: bottom2 }\n) => _isOverlapping(left1, left2, right1, right2, top1, top2, bottom1, bottom2);\n\nconst getOverlap = (\n  { left: left1, right: right1, top: top1, bottom: bottom1 },\n  { left: left2, right: right2, top: top2, bottom: bottom2 }\n) =>\n  _isOverlapping(left1, left2, right1, right2, top1, top2, bottom1, bottom2)\n    ? {\n        left: Math.max(left1, left2),\n        right: Math.min(right1, right2),\n        top: Math.max(top1, top2),\n        bottom: Math.min(bottom1, bottom2),\n      }\n    : NO_OVERLAP;\n\nexport const layoutRects = (\n  rects,\n  radiuses,\n  minMargin = { left: 5, top: 5, right: 5, bottom: 5 }\n) => {\n  const centerLeft =\n    sum(rects.map(({ left, right }) => left + (right - left) / 2)) /\n    rects.length;\n\n  const centerTop =\n    sum(rects.map(({ top, bottom }) => top + (bottom - top) / 2)) /\n    rects.length;\n\n  const center = {\n    left: centerLeft,\n    right: centerLeft,\n    top: centerTop,\n    bottom: centerTop,\n  };\n\n  const withDistance = rects\n    .map((rect, index) => ({\n      centerDistance: getDistance(getCenter(rect), center),\n      rect,\n      rectWithMargin: addMargin(rect, minMargin),\n      index,\n      radius: radiuses[index],\n    }))\n    .sort((a, b) => b.radius - a.radius);\n\n  const layedOutRects = [];\n\n  withDistance.forEach(rect => {\n    let count = 10;\n    while (\n      layedOutRects.some(layedOutRect =>\n        isOverlapping(rect.rectWithMargin, layedOutRect.rectWithMargin)\n      ) &&\n      count-- > 0\n    ) {\n      _layoutBox(rect, layedOutRects, center);\n    }\n    layedOutRects.push(rect);\n  });\n\n  const minusMargin = {\n    left: -minMargin.left,\n    right: -minMargin.right,\n    top: -minMargin.top,\n    bottom: -minMargin.bottom,\n  };\n\n  return layedOutRects\n    .sort((a, b) => a.index - b.index)\n    .map(({ rectWithMargin, label }) => addMargin(rectWithMargin, minusMargin));\n};\n\nconst _layoutBox = (rect, layedOutRects, center) => {\n  layedOutRects.forEach(layedOutRect => {\n    if (isOverlapping(rect.rectWithMargin, layedOutRect.rectWithMargin)) {\n      const centerRect = getCenter(rect.rectWithMargin);\n      const deltaLeft =\n        centerRect.left > center.left\n          ? // move right\n            layedOutRect.rectWithMargin.right - rect.rectWithMargin.left\n          : // move left\n            layedOutRect.rectWithMargin.left - rect.rectWithMargin.right;\n      const deltaTop =\n        centerRect.top > center.top\n          ? // move down\n            layedOutRect.rectWithMargin.bottom - rect.rectWithMargin.top\n          : // move up\n            layedOutRect.rectWithMargin.top - rect.rectWithMargin.bottom;\n      const isMoveLeft = Math.abs(deltaLeft) < Math.abs(deltaTop);\n      rect.rectWithMargin = moveRect(\n        rect.rectWithMargin,\n        isMoveLeft ? deltaLeft : 0,\n        isMoveLeft ? 0 : deltaTop\n      );\n    }\n  });\n};\n\nconst _isOverlapping = (\n  left1,\n  left2,\n  right1,\n  right2,\n  top1,\n  top2,\n  bottom1,\n  bottom2\n) => left1 < right2 && left2 < right1 && top1 < bottom2 && top2 < bottom1;\n","import React, { Component } from 'react';\n\nconst nop = () => null;\n\nclass Input extends React.Component {\n  onInput = ({ target: { value } }) => this.setState({ value });\n  state = {\n    value: ''\n  };\n\n  submit = () => this.props.onChange && this.props.onChange(this.state.value);\n\n  onKeyDown = event => {\n    switch (event.key) {\n      case 'Enter':\n        this.submit();\n        break;\n    }\n  };\n\n  ref = React.createRef();\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value\n    };\n  }\n\n  render() {\n    const { onChange, placeholder } = this.props;\n\n    return (\n      <input\n        type=\"text\"\n        value={this.state.value}\n        placeholder={placeholder}\n        onInput={this.onInput}\n        onBlur={this.submit}\n        onChange={nop}\n        onKeyDown={this.onKeyDown}\n      />\n    );\n  }\n}\n\nexport default Input;\n","import React from 'react';\nimport { range } from 'lodash';\nimport styled from 'styled-components';\nimport { names as labels } from './testLabels';\nimport { layoutRects, moveRect } from './util';\nimport Input from './Input';\n\nconst WIDTH = 800;\nconst HEIGHT = 500;\nconst MAX_RADIUS = 50;\nconst MIN_RADIUS = 10;\nconst MIN_FONT_SIZE = 10;\nconst MAX_FONT_SIZE = 32;\n\nconst DEFAULT_BUBBLE_COUNT = 50;\n\nconst getFontSize = radius => {\n  return (\n    MIN_FONT_SIZE +\n    ((radius - MIN_RADIUS) / (MAX_RADIUS - MIN_RADIUS)) *\n      (MAX_FONT_SIZE - MIN_FONT_SIZE)\n  );\n};\n\nconst Circle = styled.circle`\n  stroke-width: 1;\n  stroke: hsla(0, 0%, 0%, 0.15);\n`;\n\nconst View = styled.div`\n  padding: 100px;\n`;\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Label = styled.div`\n  white-space: nowrap;\n  position: absolute;\n  top: 0;\n  left: 0;\n  line-height: 1;\n  font-size: 10px;\n  font-weight: 300;\n`;\n\nconst Svg = styled.svg`\n  border: 1px solid hsla(0, 0%, 0%, 0.1);\n`;\n\nconst Controls = styled.div`\n  margin-top: 100px;\n`;\n\nconst InputLabel = styled.label`\n  margin: 0 20px;\n`;\n\nconst getRandomLabel = () =>\n  range((1 + Math.random() * 3) | 0)\n    .map(() => labels[(Math.random() * labels.length) | 0])\n    .join(' ');\n\nconst buildExampleData = (n = 50) => {\n  return range(n).map(() => {\n    const radius = (MIN_RADIUS + Math.random() * (MAX_RADIUS - MIN_RADIUS)) | 0;\n    const left = (MAX_RADIUS + Math.random() * (WIDTH - 2 * MAX_RADIUS)) | 0;\n    const top = (MAX_RADIUS + Math.random() * (HEIGHT - 2 * MAX_RADIUS)) | 0;\n    const color = `hsla(${(Math.random() * 360) | 0}, 100%, 50%, .4)`;\n    const label = {\n      label: getRandomLabel(),\n      left: 0,\n      top: 0,\n    };\n    return { radius, left, top, color, label };\n  });\n};\n\nclass TestBubbleChart extends React.Component {\n  setExampleData = () => {\n    const data = buildExampleData(this.state.bubbleCount);\n    this.setState({ data, mode: 0 });\n  };\n  state = {\n    data: buildExampleData(DEFAULT_BUBBLE_COUNT),\n    mode: 0,\n    bubbleCount: DEFAULT_BUBBLE_COUNT,\n  };\n  svgRef = React.createRef();\n  containerRef = React.createRef();\n  render() {\n    const style = {\n      width: `$WIDTH}px`,\n      height: `${HEIGHT}px`,\n    };\n    //console.log(this.state.data);\n    return (\n      <View>\n        <Container ref={this.containerRef}>\n          <Svg\n            viewBox={`0 0 ${WIDTH} ${HEIGHT}`}\n            style={style}\n            ref={this.svgRef}\n          >\n            {this.state.data.map(({ radius: r, left: cx, top: cy, color }) => (\n              <Circle r={r} cx={cx} cy={cy} fill={color} />\n            ))}\n          </Svg>\n          {this.state.data.map(({ label: { label, top, left }, radius }) => {\n            const style = {\n              left: `${left}px`,\n              top: `${top}px`,\n              fontSize: `${getFontSize(radius)}px`,\n            };\n            return (\n              <Label style={style} className=\"label\">\n                {label}\n              </Label>\n            );\n          })}\n        </Container>\n        <Controls>\n          <button onClick={this.setExampleData}>Set example data</button>\n          <InputLabel>bubble count</InputLabel>\n          <Input\n            value={this.state.bubbleCount}\n            onChange={bubbleCount =>\n              this.setState({\n                bubbleCount,\n                data: buildExampleData(bubbleCount),\n                mode: 0,\n              })\n            }\n          />\n        </Controls>\n      </View>\n    );\n  }\n\n  positionLabels() {\n    if (!this.containerRef.current) {\n      return;\n    }\n    if (this.state.mode === 0) {\n      const currentData = this.state.data;\n      const containerRect = this.containerRef.current.getBoundingClientRect();\n      const { left: offsetLeft, top: offsetTop } = containerRect;\n      const labelRects = Array.from(\n        this.containerRef.current.querySelectorAll('.label')\n      ).map((ele, index) => {\n        const rect = ele.getBoundingClientRect();\n        const { left, top } = currentData[index];\n        const deltaLeft = left - offsetLeft - (rect.right - rect.left) / 2;\n        const deltaTop = top - offsetTop - (rect.bottom - rect.top) / 2;\n        return moveRect(rect, deltaLeft, deltaTop);\n      });\n      const radiuses = this.state.data.map(({ radius }) => radius);\n      const deOverlappedLabels = layoutRects(labelRects, radiuses);\n      const data = this.state.data.map(\n        ({ label: { label }, ...rest }, index) => {\n          const rect = deOverlappedLabels[index];\n          return {\n            ...rest,\n            label: {\n              label,\n              ...rect,\n            },\n          };\n        }\n      );\n      //console.log('>>', data);\n      this.setState({ data, mode: 1 });\n    }\n  }\n\n  componentDidMount() {\n    this.positionLabels();\n  }\n\n  componentDidUpdate() {\n    this.positionLabels();\n  }\n}\n\nexport default TestBubbleChart;\n","import React from 'react';\n\nimport TestBubbleChart from './TestBubbleChart';\nfunction App() {\n  return (\n    <div className=\"App\">\n      <TestBubbleChart />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}